
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>iOS知识碎片四 - tripleCC的技术博客</title>
  <meta name="author" content="tripleCC">

  
  <meta name="description" content="1、显示CoreData执行的SQL语句
2、监听UITextView键盘的发送按钮
3、设置CoreData实体唯一约束
4、iOS9关于canOpenURL不生效
5、OC变参函数 显示CoreData执行的SQL语句 设置步骤(-com.apple.CoreData.SQLDebug 1 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://triplecc.github.io/blog/2016-02-02-ioszhi-shi-sui-pian-si/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="tripleCC的技术博客" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="http://libs.useso.com/js/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.useso.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.useso.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">tripleCC的技术博客</a></h1>
  
    <h2>日拱一卒</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.baidu.com" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="triplecc.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">首页</a></li>
  <li><a href="/blog/archives">所有文章</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">iOS知识碎片四</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-02-02T15:57:22+08:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>2</span><span class='date-suffix'>nd</span>, <span class='date-year'>2016</span></span> <span class='time'>3:57 pm</span></time>
        
      </p>
    
  </header>


<div class="entry-content"><p>1、显示CoreData执行的SQL语句<br>
2、监听UITextView键盘的发送按钮<br>
3、设置CoreData实体唯一约束<br>
4、iOS9关于canOpenURL不生效<br>
5、OC变参函数</p>

<!--more-->


<h2>显示CoreData执行的SQL语句</h2>

<p>设置步骤(<code>-com.apple.CoreData.SQLDebug 1</code>): <br>
<img src="/images/Snip20160202_1.png" alt="" /><br></p>

<p><img src="/images/Snip20160202_2.png" alt="" /><br>
打印结果：<br>
<img src="/images/Snip20160202_4.png" alt="" /><br></p>

<p>在获得对应的表后，可以通过sqlite3命令进行打印：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sqlite3 /Users/songruiwang/Desktop/1.sqlite </span></code></pre></td></tr></table></div></figure>


<p>执行help查询对应的命令：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sqlite&gt; .help</span></code></pre></td></tr></table></div></figure>


<p>如果要显示表内容的话，可以执行以下命令：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sqlite&gt; .mode line
</span><span class='line'>sqlite&gt; select * from tbl1;
</span><span class='line'>  one = hello!
</span><span class='line'>  two = 10
</span><span class='line'>
</span><span class='line'>  one = hello!
</span><span class='line'>  two = 200
</span><span class='line'>sqlite&gt; </span></code></pre></td></tr></table></div></figure>


<p>更多详细的操作可以通过help查看。</p>

<h2>监听UITextView键盘的发送按钮</h2>

<p>UITextField有代理方法监听是否点击了发送按钮：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>- (BOOL)textFieldShouldReturn:(UITextField *)textField;</span></code></pre></td></tr></table></div></figure>


<p>不过UITextView因为可以输入多行的关系，所以没有类似的代理方法。那么在作为聊天输入框的时候，就必须利用其它代理方法来实现：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text {
</span><span class='line'>    if ([text isEqualToString:@"\n"]) {
</span><span class='line'>        [self publish];
</span><span class='line'>        return NO;
</span><span class='line'>    } else {
</span><span class='line'>        [self adjustSubviewsWithTextView:textView];
</span><span class='line'>    }
</span><span class='line'>    return YES;
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>上面的代码块就是一种实现方式，只是需要去除输入换行的功能，不过作为聊天输入框，舍弃这个功能也是可以接受的。</p>

<h2>设置CoreData实体唯一约束</h2>

<p>在iOS9以前，不希望CoreData中出现相同的实体可以通过先查询后判断的形式实现。在iOS9以后，iOS提供了另外的设置，可以直接达到这个目的。设置步骤如下：</p>

<p>首先需要在CoreData配置实体属性中添加作为唯一标识的属性：</p>

<p><img src="/images/Snip20160222_1.png" alt="" /></p>

<p>然后在managedObjectContext上下文中添加合并策略，以便在遇到相同实体时进行更新：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="n">lazy</span> <span class="k">var</span> <span class="nl">managedObjectContext</span><span class="p">:</span> <span class="bp">NSManagedObjectContext</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>    <span class="c1">// Returns the managed object context for the application (which is already bound to the persistent store coordinator for the application.) This property is optional since there are legitimate error conditions that could cause the creation of the context to fail.</span>
</span><span class='line'>    <span class="k">let</span> <span class="n">coordinator</span> <span class="o">=</span> <span class="nb">self</span><span class="p">.</span><span class="n">persistentStoreCoordinator</span>
</span><span class='line'>    <span class="k">var</span> <span class="n">managedObjectContext</span> <span class="o">=</span> <span class="bp">NSManagedObjectContext</span><span class="p">(</span><span class="nl">concurrencyType</span><span class="p">:</span> <span class="p">.</span><span class="n">MainQueueConcurrencyType</span><span class="p">)</span>
</span><span class='line'>    <span class="n">managedObjectContext</span><span class="p">.</span><span class="n">persistentStoreCoordinator</span> <span class="o">=</span> <span class="n">coordinator</span>
</span><span class='line'>    <span class="c1">// 添加合并策略（更新为内存中的属性值）</span>
</span><span class='line'>    <span class="n">managedObjectContext</span><span class="p">.</span><span class="n">mergePolicy</span> <span class="o">=</span> <span class="n">NSMergeByPropertyObjectTrumpMergePolicy</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">managedObjectContext</span>
</span><span class='line'><span class="p">}()</span>
</span></code></pre></td></tr></table></div></figure>


<p>这样当执行以下测试代码时：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="c1">// 模型</span>
</span><span class='line'><span class="k">class</span> <span class="nl">Person</span><span class="p">:</span> <span class="bp">NSManagedObject</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">class</span> <span class="k">var</span> <span class="nl">entityName</span><span class="p">:</span> <span class="n">String</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">String</span><span class="p">(</span><span class="n">Person</span><span class="p">)</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="k">init</span><span class="p">(</span><span class="nl">context</span><span class="p">:</span> <span class="bp">NSManagedObjectContext</span><span class="p">,</span>
</span><span class='line'>        <span class="nl">name</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="k">let</span> <span class="n">entity</span> <span class="o">=</span> <span class="bp">NSEntityDescription</span><span class="p">.</span><span class="n">entityForName</span><span class="p">(</span><span class="n">Person</span><span class="p">.</span><span class="n">entityName</span><span class="p">,</span> <span class="nl">inManagedObjectContext</span><span class="p">:</span> <span class="n">context</span><span class="p">)</span><span class="o">!</span>
</span><span class='line'>            <span class="nb">super</span><span class="p">.</span><span class="k">init</span><span class="p">(</span><span class="nl">entity</span><span class="p">:</span> <span class="n">entity</span><span class="p">,</span> <span class="nl">insertIntoManagedObjectContext</span><span class="p">:</span> <span class="n">context</span><span class="p">)</span>
</span><span class='line'>            <span class="nb">self</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="p">@</span><span class="n">objc</span>
</span><span class='line'>    <span class="n">private</span> <span class="kr">override</span> <span class="k">init</span><span class="p">(</span><span class="nl">entity</span><span class="p">:</span> <span class="bp">NSEntityDescription</span><span class="p">,</span> <span class="n">insertIntoManagedObjectContext</span> <span class="nl">context</span><span class="p">:</span> <span class="bp">NSManagedObjectContext</span><span class="o">?</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="nb">super</span><span class="p">.</span><span class="k">init</span><span class="p">(</span><span class="nl">entity</span><span class="p">:</span> <span class="n">entity</span><span class="p">,</span> <span class="nl">insertIntoManagedObjectContext</span><span class="p">:</span> <span class="n">context</span><span class="p">)</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// 控制器</span>
</span><span class='line'><span class="k">var</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'><span class="k">var</span> <span class="nl">persons</span><span class="p">:</span> <span class="p">[</span><span class="n">Person</span><span class="p">]</span><span class="o">!</span>
</span><span class='line'><span class="c1">// 按键回调</span>
</span><span class='line'><span class="k">func</span> <span class="n">add</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">let</span> <span class="n">delegate</span> <span class="o">=</span> <span class="bp">UIApplication</span><span class="p">.</span><span class="n">sharedApplication</span><span class="p">().</span><span class="n">delegate</span> <span class="kt">as</span><span class="o">!</span> <span class="n">AppDelegate</span>
</span><span class='line'>    <span class="n">delegate</span><span class="p">.</span><span class="n">managedObjectContext</span><span class="p">.</span><span class="n">performBlock</span> <span class="p">{</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Void</span> <span class="k">in</span>
</span><span class='line'>        <span class="k">let</span> <span class="n">person</span> <span class="o">=</span> <span class="n">Person</span><span class="p">(</span><span class="nl">context</span><span class="p">:</span> <span class="n">delegate</span><span class="p">.</span><span class="n">managedObjectContext</span><span class="p">,</span> <span class="nl">name</span><span class="p">:</span> <span class="s">&quot;\(self.i++ % 4)&quot;</span><span class="p">)</span>
</span><span class='line'>        <span class="n">person</span><span class="p">.</span><span class="n">age</span> <span class="o">=</span> <span class="nb">self</span><span class="p">.</span><span class="n">i</span> <span class="o">%</span> <span class="mi">5</span>
</span><span class='line'>        <span class="n">delegate</span><span class="p">.</span><span class="n">saveContext</span><span class="p">()</span>
</span><span class='line'>        <span class="k">let</span> <span class="n">request</span> <span class="o">=</span> <span class="bp">NSFetchRequest</span><span class="p">(</span><span class="nl">entityName</span><span class="p">:</span> <span class="n">Person</span><span class="p">.</span><span class="n">entityName</span><span class="p">)</span>
</span><span class='line'>        <span class="nb">self</span><span class="p">.</span><span class="n">persons</span> <span class="o">=</span> <span class="n">try</span><span class="o">!</span> <span class="n">delegate</span><span class="p">.</span><span class="n">managedObjectContext</span><span class="p">.</span><span class="n">executeFetchRequest</span><span class="p">(</span><span class="n">request</span><span class="p">)</span> <span class="kt">as</span><span class="o">!</span> <span class="p">[</span><span class="n">Person</span><span class="p">]</span>
</span><span class='line'>        <span class="n">print</span><span class="p">(</span><span class="nb">self</span><span class="p">.</span><span class="n">persons</span><span class="p">.</span><span class="n">last</span><span class="o">?</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="nb">self</span><span class="p">.</span><span class="n">persons</span><span class="p">.</span><span class="n">count</span><span class="p">,</span> <span class="nb">self</span><span class="p">.</span><span class="n">persons</span><span class="p">.</span><span class="n">last</span><span class="o">?</span><span class="p">.</span><span class="n">age</span><span class="p">)</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>  
</span></code></pre></td></tr></table></div></figure>


<p>会输出：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="n">Optional</span><span class="p">(</span><span class="s">&quot;3&quot;</span><span class="p">)</span> <span class="mi">4</span> <span class="n">Optional</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</span><span class='line'><span class="n">Optional</span><span class="p">(</span><span class="s">&quot;3&quot;</span><span class="p">)</span> <span class="mi">4</span> <span class="n">Optional</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</span><span class='line'><span class="n">Optional</span><span class="p">(</span><span class="s">&quot;3&quot;</span><span class="p">)</span> <span class="mi">4</span> <span class="n">Optional</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</span><span class='line'><span class="n">Optional</span><span class="p">(</span><span class="s">&quot;3&quot;</span><span class="p">)</span> <span class="mi">4</span> <span class="n">Optional</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</span><span class='line'><span class="n">Optional</span><span class="p">(</span><span class="s">&quot;3&quot;</span><span class="p">)</span> <span class="mi">4</span> <span class="n">Optional</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</span><span class='line'><span class="n">Optional</span><span class="p">(</span><span class="s">&quot;3&quot;</span><span class="p">)</span> <span class="mi">4</span> <span class="n">Optional</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</span><span class='line'><span class="n">Optional</span><span class="p">(</span><span class="s">&quot;3&quot;</span><span class="p">)</span> <span class="mi">4</span> <span class="n">Optional</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</span><span class='line'><span class="n">Optional</span><span class="p">(</span><span class="s">&quot;3&quot;</span><span class="p">)</span> <span class="mi">4</span> <span class="n">Optional</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</span><span class='line'><span class="n">Optional</span><span class="p">(</span><span class="s">&quot;3&quot;</span><span class="p">)</span> <span class="mi">4</span> <span class="n">Optional</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</span><span class='line'><span class="n">Optional</span><span class="p">(</span><span class="s">&quot;3&quot;</span><span class="p">)</span> <span class="mi">4</span> <span class="n">Optional</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</span><span class='line'><span class="n">Optional</span><span class="p">(</span><span class="s">&quot;3&quot;</span><span class="p">)</span> <span class="mi">4</span> <span class="n">Optional</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</span><span class='line'><span class="n">Optional</span><span class="p">(</span><span class="s">&quot;3&quot;</span><span class="p">)</span> <span class="mi">4</span> <span class="n">Optional</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span><span class='line'><span class="n">Optional</span><span class="p">(</span><span class="s">&quot;3&quot;</span><span class="p">)</span> <span class="mi">4</span> <span class="n">Optional</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span><span class='line'><span class="n">Optional</span><span class="p">(</span><span class="s">&quot;3&quot;</span><span class="p">)</span> <span class="mi">4</span> <span class="n">Optional</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>可以看到最后一个实体在不断地更新，并没有添加新的实体到sqlite中。</p>

<p>不过需要注意的一点是当执行save操作后，<code>后面创建的约束值相同的实体会被清为default</code>，即除了第一个person，后面的person实体都会被清为default。</p>

<p>还有唯一约束一般结合NSFetchedResultsController使用，由NSFetchedResultsController来管理实体，就不用担心自己已经存储的有值的实体被清为defalut了（这里可以用先查后创建的方式避免，不过这样的话代码逻辑就和没有用这个约束一样了），因为在约束值相同的情况下，NSFetchedResultsController根本不会将其存入，进而不会触发对应的刷新代理方法。</p>

<h2>iOS9关于canOpenURL不生效</h2>

<p>系统在iOS9之后加强了隐私保护，需要在info.plist中设置<code>LSApplicationQueriesSchemes</code>来添加要跳转的对应URL scheme，canOpenURL才会生效。</p>

<p>详细地址:</p>

<p><a href="https://developer.apple.com/videos/play/wwdc2015/703/">session 703 privacy and your app</a></p>

<h2>OC变参函数</h2>

<p>一个项目中各个API的host可能并不一样，所以最好有一个方法能够预置对应API的host，除了宏，变参函数是个很好的选择，如下：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="p">+</span> <span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nf">jobURLStringWithPath:</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">format</span><span class="p">,</span> <span class="p">...</span> <span class="n">NS_FORMAT_FUNCTION</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">){</span>
</span><span class='line'>    <span class="bp">NSString</span> <span class="o">*</span><span class="n">contents</span> <span class="o">=</span> <span class="n">JOB_HOST</span><span class="p">;</span>
</span><span class='line'>    <span class="kt">va_list</span> <span class="n">args</span><span class="p">;</span>
</span><span class='line'>    <span class="n">va_start</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">format</span><span class="p">);</span>
</span><span class='line'>    <span class="n">contents</span> <span class="o">=</span> <span class="p">[</span><span class="n">contents</span> <span class="nl">stringByAppendingString</span><span class="p">:[[</span><span class="bp">NSString</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithFormat</span><span class="p">:</span><span class="n">format</span> <span class="nl">arguments</span><span class="p">:</span><span class="n">args</span><span class="p">]];</span>
</span><span class='line'>    <span class="n">va_end</span><span class="p">(</span><span class="n">args</span><span class="p">);</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">contents</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>这样就可以进行以下调用来获取url字符串：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="p">[</span><span class="n">BaseAPI</span> <span class="nl">jobURLStringWithPath</span><span class="p">:</span><span class="s">@&quot;/deliveries.json&quot;</span><span class="p">]</span>
</span><span class='line'><span class="p">[</span><span class="n">BaseAPI</span> <span class="nl">jobURLStringWithPath</span><span class="p">:</span><span class="s">@&quot;/user/%@/job.json&quot;</span><span class="p">,</span> <span class="n">userId</span><span class="p">];</span>
</span></code></pre></td></tr></table></div></figure>


<p>相对来说还是比较方便的。</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">tripleCC</span></span>

      




<time class='entry-date' datetime='2016-02-02T15:57:22+08:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>2</span><span class='date-suffix'>nd</span>, <span class='date-year'>2016</span></span> <span class='time'>3:57 pm</span></time>
      


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2016-01-14-lldbchang-jian-ming-ling/" title="Previous Post: 工具速查博客">&laquo; 工具速查博客</a>
      
      
        <a class="basic-alignment right" href="/blog/2016-02-05-locksmithmian-xiang-xie-yi-ku/" title="Next Post: 关于keychain封装库Locksmith">关于keychain封装库Locksmith &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>关于我</h1>
  <p> 喜欢技术，喜欢Ubuntu，喜欢字符终端，热衷底层，涉略微处理器、Linux，最终加入移动大家庭 </p>
  <a href="http://www.jianshu.com/users/97e39e95c2cc" style="color: coral"> 访问我的简书 </a><br>
  <a href="https://github.com/tripleCC" style="color: coral"> 访问我的github </a><br>
  <a href="https://twitter.com/tripleCCBrian" style="color: coral"> 我的twitter </a>
</section>
<section>
  <h1>最近发布</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2016-09-10-shi-yong-assetslibraryhe-photokitzuo-%5B%3F%5D-ge-xiang-pian-xuan-ze-qi/">使用AssetsLibrary和PhotoKit做一个简易的相片选择器</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016-08-10-ioszhi-shi-sui-pian-liu/">iOS知识碎片六</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016-06-05-yymodelyue-du-xiao-ji/">YYModel阅读小记</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016-05-12-mqttshi-yong-xiao-ji/">MQTT使用小记</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016-04-23-geng-jia-kuai-su-di-she-zhi-frame/">更加快速地设置Frame</a>
      </li>
    
  </ul>
</section>




<section>
    <h1>友情链接</h1>
    <ul>
        <li>
            <a href="http://wxgbridgeq.github.io/">小乔的个人学习博客</a>
        </li>
    </ul>
</section>
  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - tripleCC -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  











</body>
</html>
